{"version":3,"sources":["webpack://SFQRCode/webpack/universalModuleDefinition","webpack://SFQRCode/webpack/bootstrap","webpack://SFQRCode/external {\"root\":\"SFToolkit\",\"commonjs\":\"@spiral-toolkit/core\",\"amd\":\"@spiral-toolkit/core\",\"commonjs2\":\"@spiral-toolkit/core\"}","webpack://SFQRCode/O:/Projects/SF/toolkit/node_modules/qr.js/lib/ErrorCorrectLevel.js","webpack://SFQRCode/O:/Projects/SF/toolkit/node_modules/qr.js/lib/QRCode.js","webpack://SFQRCode/O:/Projects/SF/toolkit/node_modules/qr.js/lib/mode.js","webpack://SFQRCode/O:/Projects/SF/toolkit/node_modules/qr.js/lib/Polynomial.js","webpack://SFQRCode/O:/Projects/SF/toolkit/node_modules/qr.js/lib/math.js","webpack://SFQRCode/O:/Projects/SF/toolkit/node_modules/qr.js/lib/8BitByte.js","webpack://SFQRCode/O:/Projects/SF/toolkit/node_modules/qr.js/lib/RSBlock.js","webpack://SFQRCode/O:/Projects/SF/toolkit/node_modules/qr.js/lib/BitBuffer.js","webpack://SFQRCode/O:/Projects/SF/toolkit/node_modules/qr.js/lib/util.js","webpack://SFQRCode/./src/tool/qrcode.ts","webpack://SFQRCode/./src/QRCode.ts","webpack://SFQRCode/./src/index.ts"],"names":["root","factory","exports","module","require","define","amd","window","__WEBPACK_EXTERNAL_MODULE__0__","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","L","M","Q","H","BitByte","RSBlock","BitBuffer","util","Polynomial","QRCode","typeNumber","errorCorrectLevel","this","moduleCount","dataCache","dataList","proto","addData","data","newData","push","isDark","row","col","Error","getModuleCount","make","rsBlocks","getRSBlocks","buffer","totalDataCount","length","dataCount","put","getLength","getLengthInBits","write","makeImpl","getBestMaskPattern","test","maskPattern","Array","setupPositionProbePattern","setupPositionAdjustPattern","setupTimingPattern","setupTypeInfo","setupTypeNumber","createData","mapData","minLostPoint","pattern","lostPoint","getLostPoint","createMovieClip","target_mc","instance_name","depth","qr_mc","createEmptyMovieClip","y","x","beginFill","moveTo","lineTo","endFill","pos","getPatternPosition","j","bits","getBCHTypeNumber","mod","Math","floor","getBCHTypeInfo","inc","bitIndex","byteIndex","dark","getMask","PAD0","PAD1","putBit","createBytes","offset","maxDcCount","maxEcCount","dcdata","ecdata","dcCount","ecCount","totalCount","max","rsPoly","getErrorCorrectPolynomial","modPoly","modIndex","totalCodeCount","index","MODE_NUMBER","MODE_ALPHA_NUM","MODE_8BIT_BYTE","MODE_KANJI","math","QRPolynomial","num","shift","undefined","multiply","e","gexp","glog","ratio","QRMath","LOG_TABLE","EXP_TABLE","QR8bitByte","charCodeAt","ECL","QRRSBlock","RS_BLOCK_TABLE","rsBlock","getRsBlockTable","list","count","QRBitBuffer","bufIndex","bit","Mode","QRMaskPattern","QRUtil","PATTERN_POSITION_TABLE","G15","G18","G15_MASK","getBCHDigit","digit","errorCorrectLength","a","type","qrCode","sameCount","darkCount","abs","__assign","assign","arguments","apply","__rest","indexOf","getOwnPropertySymbols","propertyIsEnumerable","convertStr","str","out","charcode","String","fromCharCode","DEFAULT_PROPS","size","level","bgColor","fgColor","includeMargin","generatePath","margin","ops","forEach","start","cell","join","excavateModules","excavation","slice","map","h","w","getImageSettings","props","cells","imageSettings","numCells","defaultSize","scale","width","height","excavate","floorX","floorY","ceil","extendStatics","SUPPORTS_PATH2D","Path2D","addPath","QRCodeR","node","renderAs","otherProps","qrcode","imageStr","calculatedImageSettings","src","fgPath","div","document","createElement","innerHTML","appendChild","render","QRCodeSVG","img","style","imgSrc","canvas","renderqr","image","ctx","getContext","pixelRatio","devicePixelRatio","fillStyle","fillRect","fill","rdx","cdx","drawImage","keys","styleKey","display","addEventListener","QRCodeCanvas","__extends","b","setPrototypeOf","__proto__","__","constructor","_super","ssf","options","_this","defaultOptions","spiralFrameworkName","optionsToGrab","domAttr","ecLevel","logoUrl","logoWidth","logoHeight","logoX","logoY","logoMargin","init","_a","spiralFrameworkCssName","core","BaseDOMConstructor","registerInstanceType"],"mappings":"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","file":"qrcode.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"@spiral-toolkit/core\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"@spiral-toolkit/qrcode\", [\"@spiral-toolkit/core\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"@spiral-toolkit/qrcode\"] = factory(require(\"@spiral-toolkit/core\"));\n\telse\n\t\troot[\"SFQRCode\"] = factory(root[\"SFToolkit\"]);\n})(window, function(__WEBPACK_EXTERNAL_MODULE__0__) {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 6);\n","module.exports = __WEBPACK_EXTERNAL_MODULE__0__;","module.exports = {\n\tL : 1,\n\tM : 0,\n\tQ : 3,\n\tH : 2\n};\n\n","var BitByte = require('./8BitByte');\nvar RSBlock = require('./RSBlock');\nvar BitBuffer = require('./BitBuffer');\nvar util = require('./util');\nvar Polynomial = require('./Polynomial');\n\nfunction QRCode(typeNumber, errorCorrectLevel) {\n\tthis.typeNumber = typeNumber;\n\tthis.errorCorrectLevel = errorCorrectLevel;\n\tthis.modules = null;\n\tthis.moduleCount = 0;\n\tthis.dataCache = null;\n\tthis.dataList = [];\n}\n\n// for client side minification\nvar proto = QRCode.prototype;\n\nproto.addData = function(data) {\n\tvar newData = new BitByte(data);\n\tthis.dataList.push(newData);\n\tthis.dataCache = null;\n};\n\nproto.isDark = function(row, col) {\n\tif (row < 0 || this.moduleCount <= row || col < 0 || this.moduleCount <= col) {\n\t\tthrow new Error(row + \",\" + col);\n\t}\n\treturn this.modules[row][col];\n};\n\nproto.getModuleCount = function() {\n\treturn this.moduleCount;\n};\n\nproto.make = function() {\n\t// Calculate automatically typeNumber if provided is < 1\n\tif (this.typeNumber < 1 ){\n\t\tvar typeNumber = 1;\n\t\tfor (typeNumber = 1; typeNumber < 40; typeNumber++) {\n\t\t\tvar rsBlocks = RSBlock.getRSBlocks(typeNumber, this.errorCorrectLevel);\n\n\t\t\tvar buffer = new BitBuffer();\n\t\t\tvar totalDataCount = 0;\n\t\t\tfor (var i = 0; i < rsBlocks.length; i++) {\n\t\t\t\ttotalDataCount += rsBlocks[i].dataCount;\n\t\t\t}\n\n\t\t\tfor (var i = 0; i < this.dataList.length; i++) {\n\t\t\t\tvar data = this.dataList[i];\n\t\t\t\tbuffer.put(data.mode, 4);\n\t\t\t\tbuffer.put(data.getLength(), util.getLengthInBits(data.mode, typeNumber) );\n\t\t\t\tdata.write(buffer);\n\t\t\t}\n\t\t\tif (buffer.getLengthInBits() <= totalDataCount * 8)\n\t\t\t\tbreak;\n\t\t}\n\t\tthis.typeNumber = typeNumber;\n\t}\n\tthis.makeImpl(false, this.getBestMaskPattern() );\n};\n\nproto.makeImpl = function(test, maskPattern) {\n\t\n\tthis.moduleCount = this.typeNumber * 4 + 17;\n\tthis.modules = new Array(this.moduleCount);\n\t\n\tfor (var row = 0; row < this.moduleCount; row++) {\n\t\t\n\t\tthis.modules[row] = new Array(this.moduleCount);\n\t\t\n\t\tfor (var col = 0; col < this.moduleCount; col++) {\n\t\t\tthis.modules[row][col] = null;//(col + row) % 3;\n\t\t}\n\t}\n\n\tthis.setupPositionProbePattern(0, 0);\n\tthis.setupPositionProbePattern(this.moduleCount - 7, 0);\n\tthis.setupPositionProbePattern(0, this.moduleCount - 7);\n\tthis.setupPositionAdjustPattern();\n\tthis.setupTimingPattern();\n\tthis.setupTypeInfo(test, maskPattern);\n\t\n\tif (this.typeNumber >= 7) {\n\t\tthis.setupTypeNumber(test);\n\t}\n\n\tif (this.dataCache == null) {\n\t\tthis.dataCache = QRCode.createData(this.typeNumber, this.errorCorrectLevel, this.dataList);\n\t}\n\n\tthis.mapData(this.dataCache, maskPattern);\n};\n\nproto.setupPositionProbePattern = function(row, col)  {\n\t\n\tfor (var r = -1; r <= 7; r++) {\n\t\t\n\t\tif (row + r <= -1 || this.moduleCount <= row + r) continue;\n\t\t\n\t\tfor (var c = -1; c <= 7; c++) {\n\t\t\t\n\t\t\tif (col + c <= -1 || this.moduleCount <= col + c) continue;\n\t\t\t\n\t\t\tif ( (0 <= r && r <= 6 && (c == 0 || c == 6) )\n\t\t\t\t\t|| (0 <= c && c <= 6 && (r == 0 || r == 6) )\n\t\t\t\t\t|| (2 <= r && r <= 4 && 2 <= c && c <= 4) ) {\n\t\t\t\tthis.modules[row + r][col + c] = true;\n\t\t\t} else {\n\t\t\t\tthis.modules[row + r][col + c] = false;\n\t\t\t}\n\t\t}\t\t\n\t}\t\t\n};\n\nproto.getBestMaskPattern = function() {\n\n\tvar minLostPoint = 0;\n\tvar pattern = 0;\n\n\tfor (var i = 0; i < 8; i++) {\n\t\t\n\t\tthis.makeImpl(true, i);\n\n\t\tvar lostPoint = util.getLostPoint(this);\n\n\t\tif (i == 0 || minLostPoint >  lostPoint) {\n\t\t\tminLostPoint = lostPoint;\n\t\t\tpattern = i;\n\t\t}\n\t}\n\n\treturn pattern;\n};\n\nproto.createMovieClip = function(target_mc, instance_name, depth) {\n\n\tvar qr_mc = target_mc.createEmptyMovieClip(instance_name, depth);\n\tvar cs = 1;\n\n\tthis.make();\n\n\tfor (var row = 0; row < this.modules.length; row++) {\n\t\t\n\t\tvar y = row * cs;\n\t\t\n\t\tfor (var col = 0; col < this.modules[row].length; col++) {\n\n\t\t\tvar x = col * cs;\n\t\t\tvar dark = this.modules[row][col];\n\t\t\n\t\t\tif (dark) {\n\t\t\t\tqr_mc.beginFill(0, 100);\n\t\t\t\tqr_mc.moveTo(x, y);\n\t\t\t\tqr_mc.lineTo(x + cs, y);\n\t\t\t\tqr_mc.lineTo(x + cs, y + cs);\n\t\t\t\tqr_mc.lineTo(x, y + cs);\n\t\t\t\tqr_mc.endFill();\n\t\t\t}\n\t\t}\n\t}\n\t\n\treturn qr_mc;\n};\n\nproto.setupTimingPattern = function() {\n\t\n\tfor (var r = 8; r < this.moduleCount - 8; r++) {\n\t\tif (this.modules[r][6] != null) {\n\t\t\tcontinue;\n\t\t}\n\t\tthis.modules[r][6] = (r % 2 == 0);\n\t}\n\n\tfor (var c = 8; c < this.moduleCount - 8; c++) {\n\t\tif (this.modules[6][c] != null) {\n\t\t\tcontinue;\n\t\t}\n\t\tthis.modules[6][c] = (c % 2 == 0);\n\t}\n};\n\nproto.setupPositionAdjustPattern = function() {\n\n\tvar pos = util.getPatternPosition(this.typeNumber);\n\t\n\tfor (var i = 0; i < pos.length; i++) {\n\t\n\t\tfor (var j = 0; j < pos.length; j++) {\n\t\t\n\t\t\tvar row = pos[i];\n\t\t\tvar col = pos[j];\n\t\t\t\n\t\t\tif (this.modules[row][col] != null) {\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\t\n\t\t\tfor (var r = -2; r <= 2; r++) {\n\t\t\t\n\t\t\t\tfor (var c = -2; c <= 2; c++) {\n\t\t\t\t\n\t\t\t\t\tif (r == -2 || r == 2 || c == -2 || c == 2\n\t\t\t\t\t\t\t|| (r == 0 && c == 0) ) {\n\t\t\t\t\t\tthis.modules[row + r][col + c] = true;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.modules[row + r][col + c] = false;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n};\n\nproto.setupTypeNumber = function(test) {\n\n\tvar bits = util.getBCHTypeNumber(this.typeNumber);\n\n\tfor (var i = 0; i < 18; i++) {\n\t\tvar mod = (!test && ( (bits >> i) & 1) == 1);\n\t\tthis.modules[Math.floor(i / 3)][i % 3 + this.moduleCount - 8 - 3] = mod;\n\t}\n\n\tfor (var i = 0; i < 18; i++) {\n\t\tvar mod = (!test && ( (bits >> i) & 1) == 1);\n\t\tthis.modules[i % 3 + this.moduleCount - 8 - 3][Math.floor(i / 3)] = mod;\n\t}\n};\n\nproto.setupTypeInfo = function(test, maskPattern) {\n\n\tvar data = (this.errorCorrectLevel << 3) | maskPattern;\n\tvar bits = util.getBCHTypeInfo(data);\n\n\t// vertical\t\t\n\tfor (var i = 0; i < 15; i++) {\n\n\t\tvar mod = (!test && ( (bits >> i) & 1) == 1);\n\n\t\tif (i < 6) {\n\t\t\tthis.modules[i][8] = mod;\n\t\t} else if (i < 8) {\n\t\t\tthis.modules[i + 1][8] = mod;\n\t\t} else {\n\t\t\tthis.modules[this.moduleCount - 15 + i][8] = mod;\n\t\t}\n\t}\n\n\t// horizontal\n\tfor (var i = 0; i < 15; i++) {\n\n\t\tvar mod = (!test && ( (bits >> i) & 1) == 1);\n\t\t\n\t\tif (i < 8) {\n\t\t\tthis.modules[8][this.moduleCount - i - 1] = mod;\n\t\t} else if (i < 9) {\n\t\t\tthis.modules[8][15 - i - 1 + 1] = mod;\n\t\t} else {\n\t\t\tthis.modules[8][15 - i - 1] = mod;\n\t\t}\n\t}\n\n\t// fixed module\n\tthis.modules[this.moduleCount - 8][8] = (!test);\n};\n\nproto.mapData = function(data, maskPattern) {\n\t\n\tvar inc = -1;\n\tvar row = this.moduleCount - 1;\n\tvar bitIndex = 7;\n\tvar byteIndex = 0;\n\t\n\tfor (var col = this.moduleCount - 1; col > 0; col -= 2) {\n\n\t\tif (col == 6) col--;\n\n\t\twhile (true) {\n\n\t\t\tfor (var c = 0; c < 2; c++) {\n\t\t\t\t\n\t\t\t\tif (this.modules[row][col - c] == null) {\n\t\t\t\t\t\n\t\t\t\t\tvar dark = false;\n\n\t\t\t\t\tif (byteIndex < data.length) {\n\t\t\t\t\t\tdark = ( ( (data[byteIndex] >>> bitIndex) & 1) == 1);\n\t\t\t\t\t}\n\n\t\t\t\t\tvar mask = util.getMask(maskPattern, row, col - c);\n\n\t\t\t\t\tif (mask) {\n\t\t\t\t\t\tdark = !dark;\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tthis.modules[row][col - c] = dark;\n\t\t\t\t\tbitIndex--;\n\n\t\t\t\t\tif (bitIndex == -1) {\n\t\t\t\t\t\tbyteIndex++;\n\t\t\t\t\t\tbitIndex = 7;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\t\t\t\t\t\n\t\t\trow += inc;\n\n\t\t\tif (row < 0 || this.moduleCount <= row) {\n\t\t\t\trow -= inc;\n\t\t\t\tinc = -inc;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n};\n\nQRCode.PAD0 = 0xEC;\nQRCode.PAD1 = 0x11;\n\nQRCode.createData = function(typeNumber, errorCorrectLevel, dataList) {\n\t\n\tvar rsBlocks = RSBlock.getRSBlocks(typeNumber, errorCorrectLevel);\n\t\n\tvar buffer = new BitBuffer();\n\t\n\tfor (var i = 0; i < dataList.length; i++) {\n\t\tvar data = dataList[i];\n\t\tbuffer.put(data.mode, 4);\n\t\tbuffer.put(data.getLength(), util.getLengthInBits(data.mode, typeNumber) );\n\t\tdata.write(buffer);\n\t}\n\n\t// calc num max data.\n\tvar totalDataCount = 0;\n\tfor (var i = 0; i < rsBlocks.length; i++) {\n\t\ttotalDataCount += rsBlocks[i].dataCount;\n\t}\n\n\tif (buffer.getLengthInBits() > totalDataCount * 8) {\n\t\tthrow new Error(\"code length overflow. (\"\n\t\t\t+ buffer.getLengthInBits()\n\t\t\t+ \">\"\n\t\t\t+  totalDataCount * 8\n\t\t\t+ \")\");\n\t}\n\n\t// end code\n\tif (buffer.getLengthInBits() + 4 <= totalDataCount * 8) {\n\t\tbuffer.put(0, 4);\n\t}\n\n\t// padding\n\twhile (buffer.getLengthInBits() % 8 != 0) {\n\t\tbuffer.putBit(false);\n\t}\n\n\t// padding\n\twhile (true) {\n\t\t\n\t\tif (buffer.getLengthInBits() >= totalDataCount * 8) {\n\t\t\tbreak;\n\t\t}\n\t\tbuffer.put(QRCode.PAD0, 8);\n\t\t\n\t\tif (buffer.getLengthInBits() >= totalDataCount * 8) {\n\t\t\tbreak;\n\t\t}\n\t\tbuffer.put(QRCode.PAD1, 8);\n\t}\n\n\treturn QRCode.createBytes(buffer, rsBlocks);\n};\n\nQRCode.createBytes = function(buffer, rsBlocks) {\n\n\tvar offset = 0;\n\t\n\tvar maxDcCount = 0;\n\tvar maxEcCount = 0;\n\t\n\tvar dcdata = new Array(rsBlocks.length);\n\tvar ecdata = new Array(rsBlocks.length);\n\t\n\tfor (var r = 0; r < rsBlocks.length; r++) {\n\n\t\tvar dcCount = rsBlocks[r].dataCount;\n\t\tvar ecCount = rsBlocks[r].totalCount - dcCount;\n\n\t\tmaxDcCount = Math.max(maxDcCount, dcCount);\n\t\tmaxEcCount = Math.max(maxEcCount, ecCount);\n\t\t\n\t\tdcdata[r] = new Array(dcCount);\n\t\t\n\t\tfor (var i = 0; i < dcdata[r].length; i++) {\n\t\t\tdcdata[r][i] = 0xff & buffer.buffer[i + offset];\n\t\t}\n\t\toffset += dcCount;\n\t\t\n\t\tvar rsPoly = util.getErrorCorrectPolynomial(ecCount);\n\t\tvar rawPoly = new Polynomial(dcdata[r], rsPoly.getLength() - 1);\n\n\t\tvar modPoly = rawPoly.mod(rsPoly);\n\t\tecdata[r] = new Array(rsPoly.getLength() - 1);\n\t\tfor (var i = 0; i < ecdata[r].length; i++) {\n            var modIndex = i + modPoly.getLength() - ecdata[r].length;\n\t\t\tecdata[r][i] = (modIndex >= 0)? modPoly.get(modIndex) : 0;\n\t\t}\n\n\t}\n\t\n\tvar totalCodeCount = 0;\n\tfor (var i = 0; i < rsBlocks.length; i++) {\n\t\ttotalCodeCount += rsBlocks[i].totalCount;\n\t}\n\n\tvar data = new Array(totalCodeCount);\n\tvar index = 0;\n\n\tfor (var i = 0; i < maxDcCount; i++) {\n\t\tfor (var r = 0; r < rsBlocks.length; r++) {\n\t\t\tif (i < dcdata[r].length) {\n\t\t\t\tdata[index++] = dcdata[r][i];\n\t\t\t}\n\t\t}\n\t}\n\n\tfor (var i = 0; i < maxEcCount; i++) {\n\t\tfor (var r = 0; r < rsBlocks.length; r++) {\n\t\t\tif (i < ecdata[r].length) {\n\t\t\t\tdata[index++] = ecdata[r][i];\n\t\t\t}\n\t\t}\n\t}\n\n\treturn data;\n};\n\nmodule.exports = QRCode;\n\n","module.exports = {\n\tMODE_NUMBER :\t\t1 << 0,\n\tMODE_ALPHA_NUM : \t1 << 1,\n\tMODE_8BIT_BYTE : \t1 << 2,\n\tMODE_KANJI :\t\t1 << 3\n};\n","var math = require('./math');\n\nfunction QRPolynomial(num, shift) {\n\n\tif (num.length == undefined) {\n\t\tthrow new Error(num.length + \"/\" + shift);\n\t}\n\n\tvar offset = 0;\n\n\twhile (offset < num.length && num[offset] == 0) {\n\t\toffset++;\n\t}\n\n\tthis.num = new Array(num.length - offset + shift);\n\tfor (var i = 0; i < num.length - offset; i++) {\n\t\tthis.num[i] = num[i + offset];\n\t}\n}\n\nQRPolynomial.prototype = {\n\n\tget : function(index) {\n\t\treturn this.num[index];\n\t},\n\t\n\tgetLength : function() {\n\t\treturn this.num.length;\n\t},\n\t\n\tmultiply : function(e) {\n\t\n\t\tvar num = new Array(this.getLength() + e.getLength() - 1);\n\t\n\t\tfor (var i = 0; i < this.getLength(); i++) {\n\t\t\tfor (var j = 0; j < e.getLength(); j++) {\n\t\t\t\tnum[i + j] ^= math.gexp(math.glog(this.get(i) ) + math.glog(e.get(j) ) );\n\t\t\t}\n\t\t}\n\t\n\t\treturn new QRPolynomial(num, 0);\n\t},\n\t\n\tmod : function(e) {\n\t\n\t\tif (this.getLength() - e.getLength() < 0) {\n\t\t\treturn this;\n\t\t}\n\t\n\t\tvar ratio = math.glog(this.get(0) ) - math.glog(e.get(0) );\n\t\n\t\tvar num = new Array(this.getLength() );\n\t\t\n\t\tfor (var i = 0; i < this.getLength(); i++) {\n\t\t\tnum[i] = this.get(i);\n\t\t}\n\t\t\n\t\tfor (var i = 0; i < e.getLength(); i++) {\n\t\t\tnum[i] ^= math.gexp(math.glog(e.get(i) ) + ratio);\n\t\t}\n\t\n\t\t// recursive call\n\t\treturn new QRPolynomial(num, 0).mod(e);\n\t}\n};\n\nmodule.exports = QRPolynomial;\n","var QRMath = {\n\n\tglog : function(n) {\n\t\n\t\tif (n < 1) {\n\t\t\tthrow new Error(\"glog(\" + n + \")\");\n\t\t}\n\t\t\n\t\treturn QRMath.LOG_TABLE[n];\n\t},\n\t\n\tgexp : function(n) {\n\t\n\t\twhile (n < 0) {\n\t\t\tn += 255;\n\t\t}\n\t\n\t\twhile (n >= 256) {\n\t\t\tn -= 255;\n\t\t}\n\t\n\t\treturn QRMath.EXP_TABLE[n];\n\t},\n\t\n\tEXP_TABLE : new Array(256),\n\t\n\tLOG_TABLE : new Array(256)\n\n};\n\t\nfor (var i = 0; i < 8; i++) {\n\tQRMath.EXP_TABLE[i] = 1 << i;\n}\nfor (var i = 8; i < 256; i++) {\n\tQRMath.EXP_TABLE[i] = QRMath.EXP_TABLE[i - 4]\n\t\t^ QRMath.EXP_TABLE[i - 5]\n\t\t^ QRMath.EXP_TABLE[i - 6]\n\t\t^ QRMath.EXP_TABLE[i - 8];\n}\nfor (var i = 0; i < 255; i++) {\n\tQRMath.LOG_TABLE[QRMath.EXP_TABLE[i] ] = i;\n}\n\nmodule.exports = QRMath;\n","var mode = require('./mode');\n\nfunction QR8bitByte(data) {\n\tthis.mode = mode.MODE_8BIT_BYTE;\n\tthis.data = data;\n}\n\nQR8bitByte.prototype = {\n\n\tgetLength : function(buffer) {\n\t\treturn this.data.length;\n\t},\n\t\n\twrite : function(buffer) {\n\t\tfor (var i = 0; i < this.data.length; i++) {\n\t\t\t// not JIS ...\n\t\t\tbuffer.put(this.data.charCodeAt(i), 8);\n\t\t}\n\t}\n};\n\nmodule.exports = QR8bitByte;\n\n","// ErrorCorrectLevel\nvar ECL = require('./ErrorCorrectLevel');\n\nfunction QRRSBlock(totalCount, dataCount) {\n\tthis.totalCount = totalCount;\n\tthis.dataCount  = dataCount;\n}\n\nQRRSBlock.RS_BLOCK_TABLE = [\n\n\t// L\n\t// M\n\t// Q\n\t// H\n\n\t// 1\n\t[1, 26, 19],\n\t[1, 26, 16],\n\t[1, 26, 13],\n\t[1, 26, 9],\n\t\n\t// 2\n\t[1, 44, 34],\n\t[1, 44, 28],\n\t[1, 44, 22],\n\t[1, 44, 16],\n\n\t// 3\n\t[1, 70, 55],\n\t[1, 70, 44],\n\t[2, 35, 17],\n\t[2, 35, 13],\n\n\t// 4\t\t\n\t[1, 100, 80],\n\t[2, 50, 32],\n\t[2, 50, 24],\n\t[4, 25, 9],\n\t\n\t// 5\n\t[1, 134, 108],\n\t[2, 67, 43],\n\t[2, 33, 15, 2, 34, 16],\n\t[2, 33, 11, 2, 34, 12],\n\t\n\t// 6\n\t[2, 86, 68],\n\t[4, 43, 27],\n\t[4, 43, 19],\n\t[4, 43, 15],\n\t\n\t// 7\t\t\n\t[2, 98, 78],\n\t[4, 49, 31],\n\t[2, 32, 14, 4, 33, 15],\n\t[4, 39, 13, 1, 40, 14],\n\t\n\t// 8\n\t[2, 121, 97],\n\t[2, 60, 38, 2, 61, 39],\n\t[4, 40, 18, 2, 41, 19],\n\t[4, 40, 14, 2, 41, 15],\n\t\n\t// 9\n\t[2, 146, 116],\n\t[3, 58, 36, 2, 59, 37],\n\t[4, 36, 16, 4, 37, 17],\n\t[4, 36, 12, 4, 37, 13],\n\t\n\t// 10\t\t\n\t[2, 86, 68, 2, 87, 69],\n\t[4, 69, 43, 1, 70, 44],\n\t[6, 43, 19, 2, 44, 20],\n\t[6, 43, 15, 2, 44, 16],\n\n\t// 11\n\t[4, 101, 81],\n\t[1, 80, 50, 4, 81, 51],\n\t[4, 50, 22, 4, 51, 23],\n\t[3, 36, 12, 8, 37, 13],\n\n\t// 12\n\t[2, 116, 92, 2, 117, 93],\n\t[6, 58, 36, 2, 59, 37],\n\t[4, 46, 20, 6, 47, 21],\n\t[7, 42, 14, 4, 43, 15],\n\n\t// 13\n\t[4, 133, 107],\n\t[8, 59, 37, 1, 60, 38],\n\t[8, 44, 20, 4, 45, 21],\n\t[12, 33, 11, 4, 34, 12],\n\n\t// 14\n\t[3, 145, 115, 1, 146, 116],\n\t[4, 64, 40, 5, 65, 41],\n\t[11, 36, 16, 5, 37, 17],\n\t[11, 36, 12, 5, 37, 13],\n\n\t// 15\n\t[5, 109, 87, 1, 110, 88],\n\t[5, 65, 41, 5, 66, 42],\n\t[5, 54, 24, 7, 55, 25],\n\t[11, 36, 12],\n\n\t// 16\n\t[5, 122, 98, 1, 123, 99],\n\t[7, 73, 45, 3, 74, 46],\n\t[15, 43, 19, 2, 44, 20],\n\t[3, 45, 15, 13, 46, 16],\n\n\t// 17\n\t[1, 135, 107, 5, 136, 108],\n\t[10, 74, 46, 1, 75, 47],\n\t[1, 50, 22, 15, 51, 23],\n\t[2, 42, 14, 17, 43, 15],\n\n\t// 18\n\t[5, 150, 120, 1, 151, 121],\n\t[9, 69, 43, 4, 70, 44],\n\t[17, 50, 22, 1, 51, 23],\n\t[2, 42, 14, 19, 43, 15],\n\n\t// 19\n\t[3, 141, 113, 4, 142, 114],\n\t[3, 70, 44, 11, 71, 45],\n\t[17, 47, 21, 4, 48, 22],\n\t[9, 39, 13, 16, 40, 14],\n\n\t// 20\n\t[3, 135, 107, 5, 136, 108],\n\t[3, 67, 41, 13, 68, 42],\n\t[15, 54, 24, 5, 55, 25],\n\t[15, 43, 15, 10, 44, 16],\n\n\t// 21\n\t[4, 144, 116, 4, 145, 117],\n\t[17, 68, 42],\n\t[17, 50, 22, 6, 51, 23],\n\t[19, 46, 16, 6, 47, 17],\n\n\t// 22\n\t[2, 139, 111, 7, 140, 112],\n\t[17, 74, 46],\n\t[7, 54, 24, 16, 55, 25],\n\t[34, 37, 13],\n\n\t// 23\n\t[4, 151, 121, 5, 152, 122],\n\t[4, 75, 47, 14, 76, 48],\n\t[11, 54, 24, 14, 55, 25],\n\t[16, 45, 15, 14, 46, 16],\n\n\t// 24\n\t[6, 147, 117, 4, 148, 118],\n\t[6, 73, 45, 14, 74, 46],\n\t[11, 54, 24, 16, 55, 25],\n\t[30, 46, 16, 2, 47, 17],\n\n\t// 25\n\t[8, 132, 106, 4, 133, 107],\n\t[8, 75, 47, 13, 76, 48],\n\t[7, 54, 24, 22, 55, 25],\n\t[22, 45, 15, 13, 46, 16],\n\n\t// 26\n\t[10, 142, 114, 2, 143, 115],\n\t[19, 74, 46, 4, 75, 47],\n\t[28, 50, 22, 6, 51, 23],\n\t[33, 46, 16, 4, 47, 17],\n\n\t// 27\n\t[8, 152, 122, 4, 153, 123],\n\t[22, 73, 45, 3, 74, 46],\n\t[8, 53, 23, 26, 54, 24],\n\t[12, 45, 15, 28, 46, 16],\n\n\t// 28\n\t[3, 147, 117, 10, 148, 118],\n\t[3, 73, 45, 23, 74, 46],\n\t[4, 54, 24, 31, 55, 25],\n\t[11, 45, 15, 31, 46, 16],\n\n\t// 29\n\t[7, 146, 116, 7, 147, 117],\n\t[21, 73, 45, 7, 74, 46],\n\t[1, 53, 23, 37, 54, 24],\n\t[19, 45, 15, 26, 46, 16],\n\n\t// 30\n\t[5, 145, 115, 10, 146, 116],\n\t[19, 75, 47, 10, 76, 48],\n\t[15, 54, 24, 25, 55, 25],\n\t[23, 45, 15, 25, 46, 16],\n\n\t// 31\n\t[13, 145, 115, 3, 146, 116],\n\t[2, 74, 46, 29, 75, 47],\n\t[42, 54, 24, 1, 55, 25],\n\t[23, 45, 15, 28, 46, 16],\n\n\t// 32\n\t[17, 145, 115],\n\t[10, 74, 46, 23, 75, 47],\n\t[10, 54, 24, 35, 55, 25],\n\t[19, 45, 15, 35, 46, 16],\n\n\t// 33\n\t[17, 145, 115, 1, 146, 116],\n\t[14, 74, 46, 21, 75, 47],\n\t[29, 54, 24, 19, 55, 25],\n\t[11, 45, 15, 46, 46, 16],\n\n\t// 34\n\t[13, 145, 115, 6, 146, 116],\n\t[14, 74, 46, 23, 75, 47],\n\t[44, 54, 24, 7, 55, 25],\n\t[59, 46, 16, 1, 47, 17],\n\n\t// 35\n\t[12, 151, 121, 7, 152, 122],\n\t[12, 75, 47, 26, 76, 48],\n\t[39, 54, 24, 14, 55, 25],\n\t[22, 45, 15, 41, 46, 16],\n\n\t// 36\n\t[6, 151, 121, 14, 152, 122],\n\t[6, 75, 47, 34, 76, 48],\n\t[46, 54, 24, 10, 55, 25],\n\t[2, 45, 15, 64, 46, 16],\n\n\t// 37\n\t[17, 152, 122, 4, 153, 123],\n\t[29, 74, 46, 14, 75, 47],\n\t[49, 54, 24, 10, 55, 25],\n\t[24, 45, 15, 46, 46, 16],\n\n\t// 38\n\t[4, 152, 122, 18, 153, 123],\n\t[13, 74, 46, 32, 75, 47],\n\t[48, 54, 24, 14, 55, 25],\n\t[42, 45, 15, 32, 46, 16],\n\n\t// 39\n\t[20, 147, 117, 4, 148, 118],\n\t[40, 75, 47, 7, 76, 48],\n\t[43, 54, 24, 22, 55, 25],\n\t[10, 45, 15, 67, 46, 16],\n\n\t// 40\n\t[19, 148, 118, 6, 149, 119],\n\t[18, 75, 47, 31, 76, 48],\n\t[34, 54, 24, 34, 55, 25],\n\t[20, 45, 15, 61, 46, 16]\n];\n\nQRRSBlock.getRSBlocks = function(typeNumber, errorCorrectLevel) {\n\t\n\tvar rsBlock = QRRSBlock.getRsBlockTable(typeNumber, errorCorrectLevel);\n\t\n\tif (rsBlock == undefined) {\n\t\tthrow new Error(\"bad rs block @ typeNumber:\" + typeNumber + \"/errorCorrectLevel:\" + errorCorrectLevel);\n\t}\n\n\tvar length = rsBlock.length / 3;\n\t\n\tvar list = new Array();\n\t\n\tfor (var i = 0; i < length; i++) {\n\n\t\tvar count = rsBlock[i * 3 + 0];\n\t\tvar totalCount = rsBlock[i * 3 + 1];\n\t\tvar dataCount  = rsBlock[i * 3 + 2];\n\n\t\tfor (var j = 0; j < count; j++) {\n\t\t\tlist.push(new QRRSBlock(totalCount, dataCount) );\t\n\t\t}\n\t}\n\t\n\treturn list;\n}\n\nQRRSBlock.getRsBlockTable = function(typeNumber, errorCorrectLevel) {\n\n\tswitch(errorCorrectLevel) {\n\tcase ECL.L :\n\t\treturn QRRSBlock.RS_BLOCK_TABLE[(typeNumber - 1) * 4 + 0];\n\tcase ECL.M :\n\t\treturn QRRSBlock.RS_BLOCK_TABLE[(typeNumber - 1) * 4 + 1];\n\tcase ECL.Q :\n\t\treturn QRRSBlock.RS_BLOCK_TABLE[(typeNumber - 1) * 4 + 2];\n\tcase ECL.H :\n\t\treturn QRRSBlock.RS_BLOCK_TABLE[(typeNumber - 1) * 4 + 3];\n\tdefault :\n\t\treturn undefined;\n\t}\n}\n\nmodule.exports = QRRSBlock;\n","function QRBitBuffer() {\n\tthis.buffer = new Array();\n\tthis.length = 0;\n}\n\nQRBitBuffer.prototype = {\n\n\tget : function(index) {\n\t\tvar bufIndex = Math.floor(index / 8);\n\t\treturn ( (this.buffer[bufIndex] >>> (7 - index % 8) ) & 1) == 1;\n\t},\n\t\n\tput : function(num, length) {\n\t\tfor (var i = 0; i < length; i++) {\n\t\t\tthis.putBit( ( (num >>> (length - i - 1) ) & 1) == 1);\n\t\t}\n\t},\n\t\n\tgetLengthInBits : function() {\n\t\treturn this.length;\n\t},\n\t\n\tputBit : function(bit) {\n\t\n\t\tvar bufIndex = Math.floor(this.length / 8);\n\t\tif (this.buffer.length <= bufIndex) {\n\t\t\tthis.buffer.push(0);\n\t\t}\n\t\n\t\tif (bit) {\n\t\t\tthis.buffer[bufIndex] |= (0x80 >>> (this.length % 8) );\n\t\t}\n\t\n\t\tthis.length++;\n\t}\n};\n\nmodule.exports = QRBitBuffer;\n","var Mode = require('./mode');\nvar Polynomial = require('./Polynomial');\nvar math = require('./math');\n\nvar QRMaskPattern = {\n\tPATTERN000 : 0,\n\tPATTERN001 : 1,\n\tPATTERN010 : 2,\n\tPATTERN011 : 3,\n\tPATTERN100 : 4,\n\tPATTERN101 : 5,\n\tPATTERN110 : 6,\n\tPATTERN111 : 7\n};\n\nvar QRUtil = {\n\n    PATTERN_POSITION_TABLE : [\n\t    [],\n\t    [6, 18],\n\t    [6, 22],\n\t    [6, 26],\n\t    [6, 30],\n\t    [6, 34],\n\t    [6, 22, 38],\n\t    [6, 24, 42],\n\t    [6, 26, 46],\n\t    [6, 28, 50],\n\t    [6, 30, 54],\t\t\n\t    [6, 32, 58],\n\t    [6, 34, 62],\n\t    [6, 26, 46, 66],\n\t    [6, 26, 48, 70],\n\t    [6, 26, 50, 74],\n\t    [6, 30, 54, 78],\n\t    [6, 30, 56, 82],\n\t    [6, 30, 58, 86],\n\t    [6, 34, 62, 90],\n\t    [6, 28, 50, 72, 94],\n\t    [6, 26, 50, 74, 98],\n\t    [6, 30, 54, 78, 102],\n\t    [6, 28, 54, 80, 106],\n\t    [6, 32, 58, 84, 110],\n\t    [6, 30, 58, 86, 114],\n\t    [6, 34, 62, 90, 118],\n\t    [6, 26, 50, 74, 98, 122],\n\t    [6, 30, 54, 78, 102, 126],\n\t    [6, 26, 52, 78, 104, 130],\n\t    [6, 30, 56, 82, 108, 134],\n\t    [6, 34, 60, 86, 112, 138],\n\t    [6, 30, 58, 86, 114, 142],\n\t    [6, 34, 62, 90, 118, 146],\n\t    [6, 30, 54, 78, 102, 126, 150],\n\t    [6, 24, 50, 76, 102, 128, 154],\n\t    [6, 28, 54, 80, 106, 132, 158],\n\t    [6, 32, 58, 84, 110, 136, 162],\n\t    [6, 26, 54, 82, 110, 138, 166],\n\t    [6, 30, 58, 86, 114, 142, 170]\n    ],\n\n    G15 : (1 << 10) | (1 << 8) | (1 << 5) | (1 << 4) | (1 << 2) | (1 << 1) | (1 << 0),\n    G18 : (1 << 12) | (1 << 11) | (1 << 10) | (1 << 9) | (1 << 8) | (1 << 5) | (1 << 2) | (1 << 0),\n    G15_MASK : (1 << 14) | (1 << 12) | (1 << 10)\t| (1 << 4) | (1 << 1),\n\n    getBCHTypeInfo : function(data) {\n\t    var d = data << 10;\n\t    while (QRUtil.getBCHDigit(d) - QRUtil.getBCHDigit(QRUtil.G15) >= 0) {\n\t\t    d ^= (QRUtil.G15 << (QRUtil.getBCHDigit(d) - QRUtil.getBCHDigit(QRUtil.G15) ) ); \t\n\t    }\n\t    return ( (data << 10) | d) ^ QRUtil.G15_MASK;\n    },\n\n    getBCHTypeNumber : function(data) {\n\t    var d = data << 12;\n\t    while (QRUtil.getBCHDigit(d) - QRUtil.getBCHDigit(QRUtil.G18) >= 0) {\n\t\t    d ^= (QRUtil.G18 << (QRUtil.getBCHDigit(d) - QRUtil.getBCHDigit(QRUtil.G18) ) ); \t\n\t    }\n\t    return (data << 12) | d;\n    },\n\n    getBCHDigit : function(data) {\n\n\t    var digit = 0;\n\n\t    while (data != 0) {\n\t\t    digit++;\n\t\t    data >>>= 1;\n\t    }\n\n\t    return digit;\n    },\n\n    getPatternPosition : function(typeNumber) {\n\t    return QRUtil.PATTERN_POSITION_TABLE[typeNumber - 1];\n    },\n\n    getMask : function(maskPattern, i, j) {\n\t    \n\t    switch (maskPattern) {\n\t\t    \n\t    case QRMaskPattern.PATTERN000 : return (i + j) % 2 == 0;\n\t    case QRMaskPattern.PATTERN001 : return i % 2 == 0;\n\t    case QRMaskPattern.PATTERN010 : return j % 3 == 0;\n\t    case QRMaskPattern.PATTERN011 : return (i + j) % 3 == 0;\n\t    case QRMaskPattern.PATTERN100 : return (Math.floor(i / 2) + Math.floor(j / 3) ) % 2 == 0;\n\t    case QRMaskPattern.PATTERN101 : return (i * j) % 2 + (i * j) % 3 == 0;\n\t    case QRMaskPattern.PATTERN110 : return ( (i * j) % 2 + (i * j) % 3) % 2 == 0;\n\t    case QRMaskPattern.PATTERN111 : return ( (i * j) % 3 + (i + j) % 2) % 2 == 0;\n\n\t    default :\n\t\t    throw new Error(\"bad maskPattern:\" + maskPattern);\n\t    }\n    },\n\n    getErrorCorrectPolynomial : function(errorCorrectLength) {\n\n\t    var a = new Polynomial([1], 0);\n\n\t    for (var i = 0; i < errorCorrectLength; i++) {\n\t\t    a = a.multiply(new Polynomial([1, math.gexp(i)], 0) );\n\t    }\n\n\t    return a;\n    },\n\n    getLengthInBits : function(mode, type) {\n\n\t    if (1 <= type && type < 10) {\n\n\t\t    // 1 - 9\n\n\t\t    switch(mode) {\n\t\t    case Mode.MODE_NUMBER \t: return 10;\n\t\t    case Mode.MODE_ALPHA_NUM \t: return 9;\n\t\t    case Mode.MODE_8BIT_BYTE\t: return 8;\n\t\t    case Mode.MODE_KANJI  \t: return 8;\n\t\t    default :\n\t\t\t    throw new Error(\"mode:\" + mode);\n\t\t    }\n\n\t    } else if (type < 27) {\n\n\t\t    // 10 - 26\n\n\t\t    switch(mode) {\n\t\t    case Mode.MODE_NUMBER \t: return 12;\n\t\t    case Mode.MODE_ALPHA_NUM \t: return 11;\n\t\t    case Mode.MODE_8BIT_BYTE\t: return 16;\n\t\t    case Mode.MODE_KANJI  \t: return 10;\n\t\t    default :\n\t\t\t    throw new Error(\"mode:\" + mode);\n\t\t    }\n\n\t    } else if (type < 41) {\n\n\t\t    // 27 - 40\n\n\t\t    switch(mode) {\n\t\t    case Mode.MODE_NUMBER \t: return 14;\n\t\t    case Mode.MODE_ALPHA_NUM\t: return 13;\n\t\t    case Mode.MODE_8BIT_BYTE\t: return 16;\n\t\t    case Mode.MODE_KANJI  \t: return 12;\n\t\t    default :\n\t\t\t    throw new Error(\"mode:\" + mode);\n\t\t    }\n\n\t    } else {\n\t\t    throw new Error(\"type:\" + type);\n\t    }\n    },\n\n    getLostPoint : function(qrCode) {\n\t    \n\t    var moduleCount = qrCode.getModuleCount();\n\t    \n\t    var lostPoint = 0;\n\t    \n\t    // LEVEL1\n\t    \n\t    for (var row = 0; row < moduleCount; row++) {\n\n\t\t    for (var col = 0; col < moduleCount; col++) {\n\n\t\t\t    var sameCount = 0;\n\t\t\t    var dark = qrCode.isDark(row, col);\n\n\t\t\t\tfor (var r = -1; r <= 1; r++) {\n\n\t\t\t\t    if (row + r < 0 || moduleCount <= row + r) {\n\t\t\t\t\t    continue;\n\t\t\t\t    }\n\n\t\t\t\t    for (var c = -1; c <= 1; c++) {\n\n\t\t\t\t\t    if (col + c < 0 || moduleCount <= col + c) {\n\t\t\t\t\t\t    continue;\n\t\t\t\t\t    }\n\n\t\t\t\t\t    if (r == 0 && c == 0) {\n\t\t\t\t\t\t    continue;\n\t\t\t\t\t    }\n\n\t\t\t\t\t    if (dark == qrCode.isDark(row + r, col + c) ) {\n\t\t\t\t\t\t    sameCount++;\n\t\t\t\t\t    }\n\t\t\t\t    }\n\t\t\t    }\n\n\t\t\t    if (sameCount > 5) {\n\t\t\t\t    lostPoint += (3 + sameCount - 5);\n\t\t\t    }\n\t\t    }\n\t    }\n\n\t    // LEVEL2\n\n\t    for (var row = 0; row < moduleCount - 1; row++) {\n\t\t    for (var col = 0; col < moduleCount - 1; col++) {\n\t\t\t    var count = 0;\n\t\t\t    if (qrCode.isDark(row,     col    ) ) count++;\n\t\t\t    if (qrCode.isDark(row + 1, col    ) ) count++;\n\t\t\t    if (qrCode.isDark(row,     col + 1) ) count++;\n\t\t\t    if (qrCode.isDark(row + 1, col + 1) ) count++;\n\t\t\t    if (count == 0 || count == 4) {\n\t\t\t\t    lostPoint += 3;\n\t\t\t    }\n\t\t    }\n\t    }\n\n\t    // LEVEL3\n\n\t    for (var row = 0; row < moduleCount; row++) {\n\t\t    for (var col = 0; col < moduleCount - 6; col++) {\n\t\t\t    if (qrCode.isDark(row, col)\n\t\t\t\t\t    && !qrCode.isDark(row, col + 1)\n\t\t\t\t\t    &&  qrCode.isDark(row, col + 2)\n\t\t\t\t\t    &&  qrCode.isDark(row, col + 3)\n\t\t\t\t\t    &&  qrCode.isDark(row, col + 4)\n\t\t\t\t\t    && !qrCode.isDark(row, col + 5)\n\t\t\t\t\t    &&  qrCode.isDark(row, col + 6) ) {\n\t\t\t\t    lostPoint += 40;\n\t\t\t    }\n\t\t    }\n\t    }\n\n\t    for (var col = 0; col < moduleCount; col++) {\n\t\t    for (var row = 0; row < moduleCount - 6; row++) {\n\t\t\t    if (qrCode.isDark(row, col)\n\t\t\t\t\t    && !qrCode.isDark(row + 1, col)\n\t\t\t\t\t    &&  qrCode.isDark(row + 2, col)\n\t\t\t\t\t    &&  qrCode.isDark(row + 3, col)\n\t\t\t\t\t    &&  qrCode.isDark(row + 4, col)\n\t\t\t\t\t    && !qrCode.isDark(row + 5, col)\n\t\t\t\t\t    &&  qrCode.isDark(row + 6, col) ) {\n\t\t\t\t    lostPoint += 40;\n\t\t\t    }\n\t\t    }\n\t    }\n\n\t    // LEVEL4\n\t    \n\t    var darkCount = 0;\n\n\t    for (var col = 0; col < moduleCount; col++) {\n\t\t    for (var row = 0; row < moduleCount; row++) {\n\t\t\t    if (qrCode.isDark(row, col) ) {\n\t\t\t\t    darkCount++;\n\t\t\t    }\n\t\t    }\n\t    }\n\t    \n\t    var ratio = Math.abs(100 * darkCount / moduleCount / moduleCount - 50) / 5;\n\t    lostPoint += ratio * 10;\n\n\t    return lostPoint;\t\t\n    }\n};\n\nmodule.exports = QRUtil;\n","var __assign = (this && this.__assign) || function () {\r\n    __assign = Object.assign || function(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\r\n                t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\r\nvar __rest = (this && this.__rest) || function (s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n};\r\n/* eslint-disable no-bitwise, no-plusplus, no-param-reassign */\r\n// @ts-ignore\r\nimport QRCodeImpl from 'qr.js/lib/QRCode';\r\n// @ts-ignore\r\nimport ErrorCorrectLevel from 'qr.js/lib/ErrorCorrectLevel';\r\n// Convert from UTF-16, forcing the use of byte-mode encoding in our QR Code.\r\n// This allows us to encode Hanji, Kanji, emoji, etc. Ideally we'd do more\r\n// detection and not resort to byte-mode if possible, but we're trading off\r\n// a smaller library for a smaller amount of data we can potentially encode.\r\n// Based on http://jonisalonen.com/2012/from-utf-16-to-utf-8-in-javascript/\r\nfunction convertStr(str) {\r\n    var out = '';\r\n    for (var i = 0; i < str.length; i++) {\r\n        var charcode = str.charCodeAt(i);\r\n        if (charcode < 0x0080) {\r\n            out += String.fromCharCode(charcode);\r\n        }\r\n        else if (charcode < 0x0800) {\r\n            out += String.fromCharCode(0xc0 | (charcode >> 6));\r\n            out += String.fromCharCode(0x80 | (charcode & 0x3f));\r\n        }\r\n        else if (charcode < 0xd800 || charcode >= 0xe000) {\r\n            out += String.fromCharCode(0xe0 | (charcode >> 12));\r\n            out += String.fromCharCode(0x80 | ((charcode >> 6) & 0x3f));\r\n            out += String.fromCharCode(0x80 | (charcode & 0x3f));\r\n        }\r\n        else {\r\n            // This is a surrogate pair, so we'll reconsitute the pieces and work\r\n            // from that\r\n            i++;\r\n            charcode = 0x10000 + (((charcode & 0x3ff) << 10) | (str.charCodeAt(i) & 0x3ff));\r\n            out += String.fromCharCode(0xf0 | (charcode >> 18));\r\n            out += String.fromCharCode(0x80 | ((charcode >> 12) & 0x3f));\r\n            out += String.fromCharCode(0x80 | ((charcode >> 6) & 0x3f));\r\n            out += String.fromCharCode(0x80 | (charcode & 0x3f));\r\n        }\r\n    }\r\n    return out;\r\n}\r\nvar DEFAULT_PROPS = {\r\n    size: 128,\r\n    level: 'L',\r\n    bgColor: '#FFFFFF',\r\n    fgColor: '#000000',\r\n    includeMargin: false,\r\n};\r\nvar MARGIN_SIZE = 4;\r\n// This is *very* rough estimate of max amount of QRCode allowed to be covered.\r\n// It is \"wrong\" in a lot of ways (area is a terrible way to estimate, it\r\n// really should be number of modules covered), but if for some reason we don't\r\n// get an explicit height or width, I'd rather default to something than throw.\r\nvar DEFAULT_IMG_SCALE = 0.1;\r\nfunction generatePath(modules, margin) {\r\n    if (margin === void 0) { margin = 0; }\r\n    var ops = [];\r\n    modules.forEach(function (row, y) {\r\n        var start = null;\r\n        row.forEach(function (cell, x) {\r\n            if (!cell && start !== null) {\r\n                // M0 0h7v1H0z injects the space with the move and drops the comma,\r\n                // saving a char per operation\r\n                ops.push(\"M\" + (start + margin) + \" \" + (y + margin) + \"h\" + (x - start) + \"v1H\" + (start + margin) + \"z\");\r\n                start = null;\r\n                return;\r\n            }\r\n            // end of row, clean up or skip\r\n            if (x === row.length - 1) {\r\n                if (!cell) {\r\n                    // We would have closed the op above already so this can only mean\r\n                    // 2+ light modules in a row.\r\n                    return;\r\n                }\r\n                if (start === null) {\r\n                    // Just a single dark module.\r\n                    ops.push(\"M\" + (x + margin) + \",\" + (y + margin) + \" h1v1H\" + (x + margin) + \"z\");\r\n                }\r\n                else {\r\n                    // Otherwise finish the current line.\r\n                    ops.push(\"M\" + (start + margin) + \",\" + (y + margin) + \" h\" + (x + 1 - start) + \"v1H\" + (start\r\n                        + margin) + \"z\");\r\n                }\r\n                return;\r\n            }\r\n            if (cell && start === null) {\r\n                start = x;\r\n            }\r\n        });\r\n    });\r\n    return ops.join('');\r\n}\r\n// We could just do this in generatePath, except that we want to support\r\n// non-Path2D canvas, so we need to keep it an explicit step.\r\nfunction excavateModules(modules, excavation) {\r\n    return modules.slice().map(function (row, y) {\r\n        if (y < excavation.y || y >= excavation.y + excavation.h) {\r\n            return row;\r\n        }\r\n        return row.map(function (cell, x) {\r\n            if (x < excavation.x || x >= excavation.x + excavation.w) {\r\n                return cell;\r\n            }\r\n            return false;\r\n        });\r\n    });\r\n}\r\nfunction getImageSettings(props, cells) {\r\n    var imageSettings = props.imageSettings, size = props.size, includeMargin = props.includeMargin;\r\n    if (imageSettings == null) {\r\n        return null;\r\n    }\r\n    var margin = includeMargin ? MARGIN_SIZE : 0;\r\n    var numCells = cells.length + margin * 2;\r\n    var defaultSize = Math.floor(size * DEFAULT_IMG_SCALE);\r\n    var scale = numCells / size;\r\n    var w = (imageSettings.width || defaultSize) * scale;\r\n    var h = (imageSettings.height || defaultSize) * scale;\r\n    var x = imageSettings.x == null\r\n        ? cells.length / 2 - w / 2\r\n        : imageSettings.x * scale;\r\n    var y = imageSettings.y == null\r\n        ? cells.length / 2 - h / 2\r\n        : imageSettings.y * scale;\r\n    var excavation = null;\r\n    if (imageSettings.excavate) {\r\n        var floorX = Math.floor(x);\r\n        var floorY = Math.floor(y);\r\n        var ceilW = Math.ceil(w + x - floorX);\r\n        var ceilH = Math.ceil(h + y - floorY);\r\n        excavation = {\r\n            x: floorX, y: floorY, w: ceilW, h: ceilH,\r\n        };\r\n    }\r\n    return {\r\n        x: x, y: y, h: h, w: w, excavation: excavation,\r\n    };\r\n}\r\n// For canvas we're going to switch our drawing mode based on whether or not\r\n// the environment supports Path2D. We only need the constructor to be\r\n// supported, but Edge doesn't actually support the path (string) type\r\n// argument. Luckily it also doesn't support the addPath() method. We can\r\n// treat that as the same thing.\r\n// eslint-disable-next-line func-names\r\nvar SUPPORTS_PATH2D = (function () {\r\n    try {\r\n        new Path2D().addPath(new Path2D());\r\n    }\r\n    catch (e) {\r\n        return false;\r\n    }\r\n    return true;\r\n}());\r\nexport var QRCodeCanvas = function (node, props) {\r\n    var renderqr = function (image, canvas) {\r\n        var value = props.value, size = props.size, level = props.level, bgColor = props.bgColor, fgColor = props.fgColor, includeMargin = props.includeMargin, imageSettings = props.imageSettings;\r\n        // We'll use type===-1 to force QRCode to automatically pick the best type\r\n        var qrcode = new QRCodeImpl(-1, ErrorCorrectLevel[level]);\r\n        qrcode.addData(convertStr(value));\r\n        qrcode.make();\r\n        var ctx = canvas.getContext('2d');\r\n        if (!ctx) {\r\n            return;\r\n        }\r\n        var cells = qrcode.modules;\r\n        if (cells === null) {\r\n            return;\r\n        }\r\n        var margin = includeMargin ? MARGIN_SIZE : 0;\r\n        var numCells = cells.length + margin * 2;\r\n        var calculatedImageSettings = getImageSettings(props, cells);\r\n        if (imageSettings && calculatedImageSettings) {\r\n            if (calculatedImageSettings.excavation != null) {\r\n                cells = excavateModules(cells, calculatedImageSettings.excavation);\r\n            }\r\n        }\r\n        // We're going to scale this so that the number of drawable units\r\n        // matches the number of cells. This avoids rounding issues, but does\r\n        // result in some potentially unwanted single pixel issues between\r\n        // blocks, only in environments that don't support Path2D.\r\n        var pixelRatio = window.devicePixelRatio || 1;\r\n        canvas.height = size * pixelRatio;\r\n        canvas.width = size * pixelRatio;\r\n        var scale = (size / numCells) * pixelRatio;\r\n        ctx.scale(scale, scale);\r\n        // Draw solid background, only paint dark modules.\r\n        ctx.fillStyle = bgColor;\r\n        ctx.fillRect(0, 0, numCells, numCells);\r\n        ctx.fillStyle = fgColor;\r\n        if (SUPPORTS_PATH2D) {\r\n            // $FlowFixMe: Path2D c'tor doesn't support args yet.\r\n            ctx.fill(new Path2D(generatePath(cells, margin)));\r\n        }\r\n        else {\r\n            cells.forEach(function (row, rdx) {\r\n                row.forEach(function (cell, cdx) {\r\n                    if (cell) {\r\n                        ctx.fillRect(cdx + margin, rdx + margin, 1, 1);\r\n                    }\r\n                });\r\n            });\r\n        }\r\n        if (calculatedImageSettings && image) {\r\n            ctx.drawImage(image, calculatedImageSettings.x + margin, calculatedImageSettings.y + margin, calculatedImageSettings.w, calculatedImageSettings.h);\r\n        }\r\n    };\r\n    var render = function () {\r\n        var size = props.size, style = props.style, imageSettings = props.imageSettings;\r\n        var imgSrc = imageSettings && imageSettings.src;\r\n        var img;\r\n        var canvas = document.createElement('canvas');\r\n        canvas.width = size;\r\n        canvas.style.width = size + \"px\";\r\n        canvas.height = size;\r\n        canvas.style.height = size + \"px\";\r\n        if (style) {\r\n            Object.keys(style).forEach(function (styleKey) {\r\n                canvas.style[styleKey] = style[styleKey];\r\n            });\r\n        }\r\n        if (imgSrc) {\r\n            img = document.createElement('img');\r\n            img.src = imgSrc || '';\r\n            img.style.display = 'none';\r\n            img.addEventListener('load', function () {\r\n                renderqr(img, canvas);\r\n            });\r\n        }\r\n        else {\r\n            renderqr(img, canvas);\r\n        }\r\n        node.appendChild(canvas);\r\n    };\r\n    render();\r\n};\r\nexport var QRCodeSVG = function (node, props) {\r\n    var render = function () {\r\n        var value = props.value, size = props.size, level = props.level, bgColor = props.bgColor, fgColor = props.fgColor, includeMargin = props.includeMargin, imageSettings = props.imageSettings;\r\n        // We'll use type===-1 to force QRCode to automatically pick the best type\r\n        var qrcode = new QRCodeImpl(-1, ErrorCorrectLevel[level]);\r\n        qrcode.addData(convertStr(value));\r\n        qrcode.make();\r\n        var cells = qrcode.modules;\r\n        if (cells === null) {\r\n            return;\r\n        }\r\n        var margin = includeMargin ? MARGIN_SIZE : 0;\r\n        var numCells = cells.length + margin * 2;\r\n        var imageStr = '';\r\n        if (imageSettings) {\r\n            var calculatedImageSettings = getImageSettings(props, cells);\r\n            if (calculatedImageSettings) {\r\n                if (calculatedImageSettings.excavation != null) {\r\n                    cells = excavateModules(cells, calculatedImageSettings.excavation);\r\n                }\r\n                imageStr = \"\\n        <image\\n            xlink:href=\\\"\" + imageSettings.src + \"\\\"\\n            height=\" + calculatedImageSettings.h + \"\\n            width=\" + calculatedImageSettings.w + \"\\n            x=\" + (calculatedImageSettings.x + margin) + \"\\n            y=\" + (calculatedImageSettings.y + margin) + \"\\n            preserveAspectRatio=\\\"none\\\"/>\";\r\n            }\r\n        }\r\n        // Drawing strategy: instead of a rect per module, we're going to create a\r\n        // single path for the dark modules and layer that on top of a light rect,\r\n        // for a total of 2 DOM nodes. We pay a bit more in string concat but that's\r\n        // way faster than DOM ops.\r\n        // For level 1, 441 nodes -> 2\r\n        // For level 40, 31329 -> 2\r\n        var fgPath = generatePath(cells, margin);\r\n        var div = document.createElement('div');\r\n        div.innerHTML = \"<svg\\n        shapeRendering=\\\"crispEdges\\\"\\n        height=\" + size + \"\\n        width=\" + size + \"\\n        viewBox=\\\"0 0 \" + numCells + \" \" + numCells + \"\\\"\\n        >\\n          <path fill=\\\"\" + bgColor + \"\\\" d=\\\"M0,0 h\" + numCells + \"v\" + numCells + \"H0z\\\" />\\n          <path fill=\\\"\" + fgColor + \"\\\" d=\\\"\" + fgPath + \"\\\" />\\n          \" + imageStr + \"\\n    </svg>\";\r\n        node.appendChild(div);\r\n    };\r\n    render();\r\n};\r\nexport var QRCodeR = function (node, props) {\r\n    var renderAs = props.renderAs, otherProps = __rest(props, [\"renderAs\"]);\r\n    if (renderAs === 'svg') {\r\n        QRCodeSVG(node, __assign(__assign({}, DEFAULT_PROPS), otherProps));\r\n    }\r\n    else {\r\n        QRCodeCanvas(node, __assign(__assign({}, DEFAULT_PROPS), otherProps));\r\n    }\r\n};\r\n","var __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __assign = (this && this.__assign) || function () {\r\n    __assign = Object.assign || function(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\r\n                t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\r\nvar __rest = (this && this.__rest) || function (s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n};\r\nimport sf from '@spiral-toolkit/core';\r\nimport { QRCodeR } from './tool/qrcode';\r\nvar QRCode = /** @class */ (function (_super) {\r\n    __extends(QRCode, _super);\r\n    function QRCode(ssf, node, options) {\r\n        var _this = _super.call(this) || this;\r\n        _this.options = __assign({}, QRCode.defaultOptions);\r\n        _this.name = QRCode.spiralFrameworkName;\r\n        _this.optionsToGrab = {\r\n            type: {\r\n                value: QRCode.defaultOptions.type,\r\n                domAttr: 'data-type',\r\n            },\r\n            size: {\r\n                value: QRCode.defaultOptions.size,\r\n                domAttr: 'data-size',\r\n            },\r\n            value: {\r\n                value: QRCode.defaultOptions.value,\r\n                domAttr: 'data-value',\r\n            },\r\n            ecLevel: {\r\n                value: QRCode.defaultOptions.ecLevel,\r\n                domAttr: 'data-ec-level',\r\n            },\r\n            bgColor: {\r\n                value: QRCode.defaultOptions.bgColor,\r\n                domAttr: 'data-bg-color',\r\n            },\r\n            fgColor: {\r\n                value: QRCode.defaultOptions.fgColor,\r\n                domAttr: 'data-fg-color',\r\n            },\r\n            logoUrl: {\r\n                value: QRCode.defaultOptions.logoUrl,\r\n                domAttr: 'data-logo-url',\r\n            },\r\n            logoWidth: {\r\n                value: QRCode.defaultOptions.logoWidth,\r\n                domAttr: 'data-logo-width',\r\n            },\r\n            logoHeight: {\r\n                value: QRCode.defaultOptions.logoHeight,\r\n                domAttr: 'data-logo-height',\r\n            },\r\n            logoX: {\r\n                value: QRCode.defaultOptions.logoX,\r\n                domAttr: 'data-logo-x',\r\n            },\r\n            logoY: {\r\n                value: QRCode.defaultOptions.logoY,\r\n                domAttr: 'data-logo-y',\r\n            },\r\n            logoMargin: {\r\n                value: QRCode.defaultOptions.logoMargin,\r\n                domAttr: 'data-logo-margin',\r\n            },\r\n        };\r\n        _this.init(ssf, node, options);\r\n        _this.options = __assign(__assign({}, QRCode.defaultOptions), _this.options);\r\n        _this.render();\r\n        return _this;\r\n    }\r\n    QRCode.prototype.render = function () {\r\n        var _a = this.options, value = _a.value, options = __rest(_a, [\"value\"]);\r\n        QRCodeR(this.node, {\r\n            size: options.size,\r\n            imageSettings: options.logoUrl ? {\r\n                src: options.logoUrl,\r\n                height: options.logoHeight,\r\n                width: options.logoWidth,\r\n                x: options.logoX,\r\n                y: options.logoY,\r\n                excavate: options.logoMargin >= 0 ? {\r\n                    x: options.logoX - options.logoMargin,\r\n                    y: options.logoY - options.logoMargin,\r\n                    w: options.logoX + options.logoWidth + options.logoMargin,\r\n                    h: options.logoY + options.logoHeight + options.logoMargin,\r\n                } : undefined,\r\n            } : undefined,\r\n            renderAs: options.type,\r\n            bgColor: options.bgColor,\r\n            fgColor: options.fgColor,\r\n            includeMargin: false,\r\n            level: options.ecLevel,\r\n            style: {},\r\n            value: value,\r\n        });\r\n    };\r\n    QRCode.spiralFrameworkName = 'qrcode';\r\n    QRCode.spiralFrameworkCssName = 'js-sf-qrcode';\r\n    QRCode.defaultOptions = {\r\n        size: 200,\r\n        type: 'svg',\r\n        value: '',\r\n        ecLevel: 'M',\r\n        bgColor: '#FFFFFF',\r\n        fgColor: '#000000',\r\n        logoUrl: '',\r\n        logoHeight: 0,\r\n        logoWidth: 0,\r\n        logoX: 0,\r\n        logoY: 0,\r\n        logoMargin: -1,\r\n    };\r\n    return QRCode;\r\n}(sf.core.BaseDOMConstructor));\r\nexport { QRCode };\r\n","import sf from '@spiral-toolkit/core';\r\nimport { QRCode } from './QRCode';\r\nsf.registerInstanceType(QRCode, QRCode.spiralFrameworkCssName);\r\nexport default QRCode; // ES6 default export will not expose us as global\r\n"],"sourceRoot":""}